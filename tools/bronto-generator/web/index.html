<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ブロント語ジェネレータ</title>
  <meta name="description" content="FF系ネットミームの“ブロント語”風テキストをランダム生成するシンプルなジェネレータです。" />
  <meta property="og:title" content="ブロント語ジェネレータ" />
  <meta property="og:description" content="ブロント語風テキストをブラウザだけで生成。シードや強度も調整可能。" />
  <meta property="og:type" content="website" />
  <meta name="twitter:card" content="summary" />
  <meta name="theme-color" content="#0b0f14" />
  <link rel="icon" href="favicon.svg" type="image/svg+xml" />
  <style>
    :root{
      color-scheme: dark;
      --bg:#0b0f14;     /* base background */
      --panel:#121821;  /* panel background */
      --fg:#e6edf3;     /* foreground text */
      --muted:#9fb0c2;  /* secondary text */
      --border:#243041; /* borders */
      --accent:#4ea1ff; /* buttons */
    }
    html,body{height:100%}
    body{
      margin:0;
      background:var(--bg);
      color:var(--fg);
      font-family: Inter, "Segoe UI", Roboto, "Noto Sans JP", "Hiragino Kaku Gothic ProN", "Yu Gothic UI", Meiryo, sans-serif;
      line-height:1.6;
      letter-spacing:0.2px;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }
    .wrap{ max-width: 880px; margin: 0 auto; padding: 24px 20px 40px; }
    h1{ font-size: 1.4rem; margin: 0 0 12px; }
    p.desc{ margin:0 0 16px; color: var(--muted); }
    .panel{ background: var(--panel); border:1px solid var(--border); border-radius: 12px; padding: 14px; }
    .controls{ display:flex; gap:14px; align-items:center; flex-wrap:wrap; }
    .controls label{ display:flex; gap:6px; align-items:center; color:var(--muted); }
    input[type="number"], input[type="range"], input[type="text"]{ color:var(--fg); background: #0f1520; border:1px solid var(--border); border-radius:8px; padding:6px 8px; }
    input[type="range"]{ width:220px; accent-color: var(--accent); }
    button{ background: var(--accent); color:#0a0f14; border: none; border-radius: 8px; padding:8px 12px; font-weight:600; cursor:pointer; }
    button:hover{ filter:brightness(1.05); }
    .out{ margin-top:16px; white-space: pre-wrap; border:1px solid var(--border); padding:14px; border-radius:12px; background: #0f1520; min-height: 80px; }
    footer{ margin-top:18px; color:var(--muted); font-size: 12px; }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>ブロント語ジェネレータ（クライアントサイド）</h1>
    <p class="desc">ブラウザだけで動作します。件数/強度/シードを調整して生成してください。</p>
    <div class="panel controls">
      <label>件数 <input id="count" type="number" min="1" max="50" value="5"></label>
      <label>強度 <input id="strength" type="range" min="0" max="1" step="0.05" value="0.6"></label>
      <label>Seed <input id="seed" type="number" placeholder="任意"></label>
      <label><input id="opt-tail" type="checkbox" checked> 語尾付与</label>
      <label><input id="opt-dots" type="checkbox" checked> 三点リーダ</label>
      <label><input id="opt-polite" type="checkbox" checked> です/ます疑問化</label>
      <button id="btn">生成</button>
      <button id="share">共有リンクをコピー</button>
      <button id="copy">結果をコピー</button>
      <button id="dl">JSONダウンロード</button>
    </div>
    <div class="out" id="out"></div>
    <div id="msg" style="margin-top:8px;color:var(--muted);font-size:12px;"></div>
    <footer>© 2025</footer>
  </div>

  <script>
    // 初期値（フェールセーフ）。起動時に data.json がロードされ上書きされます。
    const D = {
      TARGETS:["この敵","野良PT","俺のリンクシェル","あのモブ","あのジョブ","あのビルド","相手方","あのLS","固定のメンバー","集合場所"],
      ACTIONS:["釣る","焼く","寝かす","引きつける","回す","張る","退かす"],
      SELF_PRONOUNS:["俺","余","わたくし","わい"],
      ROLES:["タンク","伝説の剣豪","エリート","トップランカー","パンダ","ガチ勢"],
      POWERS:["火力","機転","パーフェクトフォーカス","竜の力","セカンドギア"],
      RESULTS:["完勝","殲滅","圧勝","大勝利","優勝","勝利"],
      GREETINGS:["おはよう？","おす","こんにちは","こんばんは","やあ","どうもどうも"],
      SKILLS:["スリプガ","ニンジャブーメラン","ブラッドソード","エクスカリバー","アナテマ","タワー"],
      WARNINGS:["ミスったら即抜けるけどいい？","ログ流すのやめてもろて","その動きやめてくれない？","初心者だから優しくしてね"],
      ADVERBS:["正直","割と","わりかし","実は","真面目に","かなり"],
      CLAIMS:["これは理論上最強","DPSは計算上+300です","ミニオンは運営に優遇されています","タンクは貴族だから","研究済みで証明済み"],
      FILLERS:["まあそんな感じで","というわけでよろしく","つまり結論はそういうこと","実はかなり前から思ってた"],
      IMPERATIVES:["今から集合してもらえる？","今日中に10回回してきて","次のボスに合わせて準備して","ログをちゃんと読んで"],
      POSTFIXES:["できる？","頼んだ","頼む","いいよね？"],
      EVALUATIONS:["普通","まあまあ","弱い","強い","微妙","最高"],
      CONTRASTS:["でも","しかし","ただ","とはいえ"],
      BOASTS:["個人で最後まで持っていける","問題なし","DPSが10倍になる","ミスしない","ミニマップだけで戦える"],
      ITEMS:["剣","アクセ","マテリア","盾","矢","薬"],
      RARITIES:["伝説","神話","UR","超希少","貴重","唯一無二"],
      VERBS:["拾う","投げる","砕く","打つ","撃つ","磨く"],
      EMOJIS:["🔥","😎","💪","⚔️","🛡️","🎲"],
      ENGLISH:["PRO","skill","move","rotation","meta","GG"],
      KATAKANA:["テクニック","ムーブ","プレイ","シナジー","メタ","データ"],
      EXCUSES:["キーボード壊れた","回線が不安定","寝不足です","一昨日から忙しい","勉強で8時間やってた"],
      POLITE:["お願いします…","すみません…","ご査収ください…","以上です…"],
      GAME_TERMS:["ローテーション","シナジー","GCD","フレーム","タゲ","ウェイト"],
      OPINIONS:["つよつよ","これが正解","ヨシ","定石","しっくり来る","個人の見解"],
      DIFFERENTS:["自分は違う","なんか違う","独自理論","我流の流儀","意図して外す"],
      TAILS:["だよ？","だな？","だろ？","ってこと？"],
      ELLIPSIS:["…","……","………"],
    };

    function mulberry32(a){return function(){var t=a+=0x6D2B79F5;t=Math.imul(t^t>>>15,t|1);t^=t+Math.imul(t^t>>>7,t|61);return ((t^t>>>14)>>>0)/4294967296}}

    function makeRand(seed){
      if(seed==null || seed==='') return Math.random;
      const f = mulberry32(Number(seed)>>>0);
      return ()=>f();
    }

    function choice(rng, arr){ return arr[Math.floor(rng()*arr.length)]; }
    function maybe(rng, p){ return rng() < p; }

    function bronto(rng, strength, flags){
      function tail(s){ if(!flags.tail) return s; if(maybe(rng, 0.5*strength)) s = s.replace(/[。.]?$/, '') + (maybe(rng,0.4)?' ':'') + choice(rng, D.TAILS); return s; }
      function dots(s){ if(!flags.dots) return s; if(maybe(rng, 0.5*strength)) s += choice(rng, D.ELLIPSIS); return s; }
      function greet(){ return choice(rng, D.GREETINGS); }
      function katakana(word){ return maybe(rng, 0.5*strength) ? `《${word}》` : word; }
      function post(s){ if(!flags.polite) return s; if(maybe(rng,0.35*strength)) s = s.replaceAll('です。','ですか？').replaceAll('です','ですか？'); if(maybe(rng,0.25*strength)) s = s.replaceAll('ます。','ますか？').replaceAll('ます','ますか？'); return s; }

      const patterns = [
        ()=>`${greet()} ${choice(rng,D.TARGETS)}を${choice(rng,D.ACTIONS)}と思うけど？ まあ${choice(rng,D.SELF_PRONOUNS)}の${choice(rng,D.POWERS)}があれば${choice(rng,D.RESULTS)}だったけどな？`,
        ()=>dots(`${choice(rng,D.SELF_PRONOUNS)}は${katakana(choice(rng,D.ROLES))}だから${choice(rng,D.CLAIMS)}ってことで？`),
        ()=>`${choice(rng,D.SKILLS)}使った${choice(rng,D.SELF_PRONOUNS)}の判断は正しいよな？ ${choice(rng,D.WARNINGS)}`,
        ()=>tail(`${choice(rng,D.ADVERBS)} ${choice(rng,D.CLAIMS)}。${choice(rng,D.FILLERS)}`),
        ()=>`${choice(rng,D.IMPERATIVES)}。${choice(rng,D.POSTFIXES)}`,
        ()=>`${choice(rng,D.TARGETS)}は${choice(rng,D.EVALUATIONS)}。${choice(rng,D.CONTRASTS)} ${choice(rng,D.SELF_PRONOUNS)}なら${choice(rng,D.BOASTS)}だが？`,
        ()=>dots(`最近${choice(rng,D.ITEMS)}の${choice(rng,D.RARITIES)}を${choice(rng,D.VERBS)}って聞いたけど？`),
        ()=>`${choice(rng,D.EMOJIS)} ${choice(rng,D.ENGLISH)}の${choice(rng,D.KATAKANA)}が決まった気がする？`,
        ()=>dots(`ミスったのは${choice(rng,D.EXCUSES)}。${choice(rng,D.POLITE)}`),
        ()=>`次は${choice(rng,D.GAME_TERMS)}が${choice(rng,D.OPINIONS)}。つまり${choice(rng,D.SELF_PRONOUNS)}は${choice(rng,D.DIFFERENTS)}ってこと？`,
      ];
      const s = choice(rng, patterns)();
      return post(s);
    }

    function generate(n, seed, strength, flags){
      const rng = makeRand(seed);
      const out = [];
      for(let i=0;i<n;i++) out.push(bronto(rng, strength, flags));
      return out;
    }

    let lastLines = [];

    function getParams(){
      return {
        count: Number(document.getElementById('count').value||5),
        strength: Number(document.getElementById('strength').value||0.6),
        seed: document.getElementById('seed').value,
        tail: document.getElementById('opt-tail').checked,
        dots: document.getElementById('opt-dots').checked,
        polite: document.getElementById('opt-polite').checked,
      };
    }

    function setParams(p){
      if(p.count!=null) document.getElementById('count').value = p.count;
      if(p.strength!=null) document.getElementById('strength').value = p.strength;
      if(p.seed!=null) document.getElementById('seed').value = p.seed;
      if(p.tail!=null) document.getElementById('opt-tail').checked = !!p.tail;
      if(p.dots!=null) document.getElementById('opt-dots').checked = !!p.dots;
      if(p.polite!=null) document.getElementById('opt-polite').checked = !!p.polite;
    }

    function applyFromURL(){
      const sp = new URLSearchParams(location.search);
      const p = {};
      if(sp.has('count')) p.count = sp.get('count');
      if(sp.has('strength')) p.strength = sp.get('strength');
      if(sp.has('seed')) p.seed = sp.get('seed');
      if(sp.has('tail')) p.tail = sp.get('tail') === '1';
      if(sp.has('dots')) p.dots = sp.get('dots') === '1';
      if(sp.has('polite')) p.polite = sp.get('polite') === '1';
      setParams(p);
    }

    function writeURL(){
      const p = getParams();
      const sp = new URLSearchParams();
      sp.set('count', String(p.count));
      sp.set('strength', String(p.strength));
      if(p.seed!=='' && p.seed!=null) sp.set('seed', String(p.seed));
      sp.set('tail', p.tail? '1':'0');
      sp.set('dots', p.dots? '1':'0');
      sp.set('polite', p.polite? '1':'0');
      const url = `${location.pathname}?${sp.toString()}`;
      history.replaceState(null, '', url);
      return location.href;
    }

    function run(){
      const {count, seed, strength, tail, dots, polite} = getParams();
      lastLines = generate(count, seed, strength, {tail, dots, polite});
      document.getElementById('out').textContent = lastLines.join('\n');
      writeURL();
    }

    async function copyShare(){
      const href = writeURL();
      try{ await navigator.clipboard.writeText(href); showMsg('共有リンクをコピーしました'); }
      catch{ showMsg('クリップボードへのコピーに失敗しました'); }
    }
    async function copyResult(){
      const text = (lastLines.length? lastLines : document.getElementById('out').textContent).join('\n');
      try{ await navigator.clipboard.writeText(text); showMsg('結果をコピーしました'); }
      catch{ showMsg('コピーに失敗しました'); }
    }
    function downloadJSON(){
      const blob = new Blob([JSON.stringify({params:getParams(), lines:lastLines}, null, 2)], {type:'application/json'});
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = 'bront-lines.json';
      a.click();
      URL.revokeObjectURL(a.href);
    }
    function showMsg(s){ const el = document.getElementById('msg'); el.textContent = s; setTimeout(()=>{ if(el.textContent===s) el.textContent=''; }, 2500); }

    async function loadData(){
      try{
        const res = await fetch('data.json', {cache:'no-cache'});
        if(res.ok){ Object.assign(D, await res.json()); }
      }catch(e){ /* ignore */ }
    }

    document.getElementById('btn').addEventListener('click', run);
    document.getElementById('share').addEventListener('click', copyShare);
    document.getElementById('copy').addEventListener('click', copyResult);
    document.getElementById('dl').addEventListener('click', downloadJSON);
    document.getElementById('count').addEventListener('input', ()=>{writeURL();});
    document.getElementById('strength').addEventListener('input', ()=>{writeURL();});
    document.getElementById('seed').addEventListener('input', ()=>{writeURL();});
    document.getElementById('opt-tail').addEventListener('change', ()=>{writeURL(); run();});
    document.getElementById('opt-dots').addEventListener('change', ()=>{writeURL(); run();});
    document.getElementById('opt-polite').addEventListener('change', ()=>{writeURL(); run();});
    applyFromURL();
    loadData().finally(run);
  </script>
</body>
</html>
