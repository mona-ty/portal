AIコードレビュー依頼テンプレート（汎用・Codex開発 / GPT‑5 Proレビュー）

使い方（前提）
- 想定: Codex（コーディング）→ GPT‑5 Pro（レビュー）。個人開発/小規模でも利用可。
- 必須: 「実装方針」「コード情報」「ログ抜粋」を必ず含める。機微情報はマスク。
- 収集: 任意で `scripts/collect_review_bundle.ps1` を使い、差分/ログ/環境情報をZip化。

ショート版（素早い依頼）
- 概要: <何を・なぜ・どの範囲を変更（1–3行）>
- 変更対象: <コミットID/ブランチ/主要ファイル（相対パス）>
- 実装方針（必須）: <採用アプローチ/重要な判断/代替案の却下理由>
- 再現/実行: `ビルド/起動/テストのコマンド` + <前提/環境>
- ログ抜粋（必須 10–30行）: <代表ログ>（フルログのパス/リンク）
- 着目点: <レビュー優先（バグ/性能/セキュリティ/可読性/観測性）>
- 質問（最大3件）: <具体的に確認したい点>

フル版（詳細テンプレート）
- 依頼サマリ
  - 目的/背景: <狙い・前提・ユーザー影響>
  - 成果物/受入条件: <期待する動作/UI/API/CLI出力>
  - 重要度/期日: <高/中/低> / <YYYY‑MM‑DD>

- 変更範囲
  - コミット/ブランチ: <ID/名前>
  - 種別: <新規/改修/リファクタ/バグ修正/実験フラグ>
  - 影響領域: <モジュール/機能/API/DB/UI/CLI/バッチ>

- 実装方針・設計（必須）
  - 方針: <設計パターン/主要コンポーネント/データフロー>
  - 代替検討: <不採用案と理由>
  - 重要なトレードオフ: <性能 vs 可読性/一貫性/拡張性>
  - 失敗時処理/例外: <入力検証/タイムアウト/リトライ/フォールバック>

- コード情報（必須）
  - 言語/ランタイム: <例: Node 20 / Python 3.11 / .NET 9 / JVM 21>
  - フレームワーク/依存: <バージョン明記>
  - 主要ファイル: <path/to/file: 役割, キー関数/クラス>
  - 設定/フラグ: <環境変数/Feature flag/設定ファイル/Secretsの扱い（マスク）>

- 差分ハイライト
  - 重要変更1: <ファイル/関数/ロジック要約>
  - 重要変更2: <…>
  - 互換性: <破壊的/非破壊的、移行の有無>

- 実行・再現手順
  - セットアップ: <依存インストール/ビルド/マイグレーション>（正確なコマンド）
  - 実行/テスト: <起動/テスト/ベンチ>（必要な引数・サンプル入力）
  - 手動確認: <操作手順/期待結果/スクショや出力サンプルの位置>

- ログ（必須）
  - 事象ログ抜粋: <タイムスタンプ付き 10–50行>（保存先: <パス/URL>）
  - テスト/CIログ: <抜粋とジョブID/リンク>
  - 監視/トレースID: <関連ID/リンク/スクショ>

- テスト
  - 追加/変更テスト: <ファイル/ケース/狙い>
  - カバレッジ: <重要経路の網羅状況>
  - 未検証領域: <理由と今後の計画>

- パフォーマンス
  - 指標: <P95/P99/スループット/メモリ/CPU/描画/フレーム時間>
  - 測定条件: <データ量/負荷/環境/端末>
  - 結果と閾値: <数値> / <合否基準>
  - 退行リスク: <発生条件/緩和策>

- セキュリティ・コンプライアンス
  - 入力検証/サニタイズ: <対象と方法>
  - 認可/認証/マルチテナンシ: <考慮点>
  - 秘匿情報/鍵の扱い: <保管/参照/マスク方針>
  - 依存スキャン/ライセンス: <結果/例外>

- API/DB変更（該当時）
  - API: <エンドポイント/スキーマ/エラー/互換性>
  - DB/マイグレーション: <DDL/データ移行/ロールフォワード/バック>
  - バージョニング: <セマンティック/フラグ駆動>

- リリース計画
  - フラグ/段階展開: <オン/オフ条件, カナリア/ロールアウト>
  - ロールバック: <手順/データ復旧/切替条件>
  - 監視項目: <メトリクス/アラート条件>

- 既知の懸念・未対応
  - <既知不具合/技術的負債/回避策>

- レビュー観点の優先順位（汎用）
  - 正当性/境界/例外
  - セキュリティ/耐障害性/並行性
  - 性能/メモリ/スケーラビリティ
  - 可読性/API整合性/設計一貫性
  - テスト妥当性/観測性（ログ/メトリクス/トレース）

- Codex開発コンテキスト（推奨）
  - 実装プロンプト/方針: <Codexに与えた要件・制約>
  - 変更差分: `git diff` の要点
  - 制約/前提: <時間/環境/依存関係>

- 具体的な質問
  - Q1: <例: 排他制御にデッドロック懸念は？>
  - Q2: <例: キャッシュ戦略の一貫性は維持される？>
  - Q3: <例: 代替設計Bの方が単純？トレードオフは？>

- 添付・リンク
  - PR/ブランチ/コミット: <リンク>
  - ログ/スクショ/設計図: <パス/リンク>
  - CI/カバレッジ/ベンチ: <リンク>
  - 仕様/チケット: <リンク（個人開発なら省略可）>

送付前チェックリスト
- 機微情報はマスクした
- 再現コマンドが1回で通る
- 代表ログとフルログの導線がある
- 重要差分と設計判断を1–2分で把握できる
- 質問が具体的でレビュー観点が明確

